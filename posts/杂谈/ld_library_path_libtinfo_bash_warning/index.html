<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>在 .bashrc 设置 LD_LIBRARY_PATH 导致 bash 提示 libtinfo.so.6: no version information available 的原因与影响 | Blog</title><meta name=keywords content="linux,bash,conda,isaacgym,ld_library_path,ncurses,libtinfo"><meta name=description content="现象
在 ~/.bashrc 中全局设置了类似下面的环境变量后：
export LD_LIBRARY_PATH=/home/ziye_huang/anaconda3/envs/isaacgym/lib:$LD_LIBRARY_PATH
启动新的终端或执行 /bin/bash 时会出现警告：
/home/ziye_huang/anaconda3/envs/isaacgym/lib/libtinfo.so.6: no version information available (required by /bin/bash)
这通常发生在 Conda 环境的动态库优先级 覆盖了系统库之后。

背景：bash 为什么会碰到 libtinfo

bash 在很多发行版上会链接到 readline/ncurses 相关库（交互式编辑、历史记录、终端能力等）。
ncurses 的一部分拆分为 libtinfo（terminfo 数据与接口）。
因此，/bin/bash 在启动时会通过动态链接器加载 libtinfo.so.6。

关键点在于：动态链接器会按搜索顺序选择要加载的 libtinfo.so.6 的“具体文件”。

根因：LD_LIBRARY_PATH 让 bash 先加载了 Conda 里的 libtinfo
1) 动态链接器的常见搜索顺序（简化版）
通常会按优先级从高到低搜索：

LD_LIBRARY_PATH
可执行文件的 RPATH/RUNPATH（如果存在）
系统缓存 /etc/ld.so.cache
默认系统目录（如 /lib/x86_64-linux-gnu、/usr/lib/x86_64-linux-gnu 等）

你在 .bashrc 里 全局 把：
/home/ziye_huang/anaconda3/envs/isaacgym/lib
放到了 LD_LIBRARY_PATH 的最前面，使得启动 /bin/bash 时，动态链接器优先选择了 Conda 环境中的：
.../envs/isaacgym/lib/libtinfo.so.6
而不是系统自带的 libtinfo.so.6。"><meta name=author content><link rel=canonical href=https://analyst-huang.github.io/posts/%E6%9D%82%E8%B0%88/ld_library_path_libtinfo_bash_warning/><link crossorigin=anonymous href=/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css integrity="sha256-NDzEgLn/yPBMy+XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as=style><link rel=icon href=https://analyst-huang.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://analyst-huang.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://analyst-huang.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://analyst-huang.github.io/apple-touch-icon.png><link rel=mask-icon href=https://analyst-huang.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://analyst-huang.github.io/posts/%E6%9D%82%E8%B0%88/ld_library_path_libtinfo_bash_warning/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://analyst-huang.github.io/posts/%E6%9D%82%E8%B0%88/ld_library_path_libtinfo_bash_warning/"><meta property="og:site_name" content="Blog"><meta property="og:title" content="在 .bashrc 设置 LD_LIBRARY_PATH 导致 bash 提示 libtinfo.so.6: no version information available 的原因与影响"><meta property="og:description" content="现象 在 ~/.bashrc 中全局设置了类似下面的环境变量后：
export LD_LIBRARY_PATH=/home/ziye_huang/anaconda3/envs/isaacgym/lib:$LD_LIBRARY_PATH 启动新的终端或执行 /bin/bash 时会出现警告：
/home/ziye_huang/anaconda3/envs/isaacgym/lib/libtinfo.so.6: no version information available (required by /bin/bash) 这通常发生在 Conda 环境的动态库优先级 覆盖了系统库之后。
背景：bash 为什么会碰到 libtinfo bash 在很多发行版上会链接到 readline/ncurses 相关库（交互式编辑、历史记录、终端能力等）。 ncurses 的一部分拆分为 libtinfo（terminfo 数据与接口）。 因此，/bin/bash 在启动时会通过动态链接器加载 libtinfo.so.6。 关键点在于：动态链接器会按搜索顺序选择要加载的 libtinfo.so.6 的“具体文件”。
根因：LD_LIBRARY_PATH 让 bash 先加载了 Conda 里的 libtinfo 1) 动态链接器的常见搜索顺序（简化版） 通常会按优先级从高到低搜索：
LD_LIBRARY_PATH 可执行文件的 RPATH/RUNPATH（如果存在） 系统缓存 /etc/ld.so.cache 默认系统目录（如 /lib/x86_64-linux-gnu、/usr/lib/x86_64-linux-gnu 等） 你在 .bashrc 里 全局 把：
/home/ziye_huang/anaconda3/envs/isaacgym/lib 放到了 LD_LIBRARY_PATH 的最前面，使得启动 /bin/bash 时，动态链接器优先选择了 Conda 环境中的：
.../envs/isaacgym/lib/libtinfo.so.6 而不是系统自带的 libtinfo.so.6。"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-01-13T00:00:00+00:00"><meta property="article:modified_time" content="2026-01-13T00:00:00+00:00"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Bash"><meta property="article:tag" content="Conda"><meta property="article:tag" content="Isaacgym"><meta property="article:tag" content="Ld_library_path"><meta property="article:tag" content="Ncurses"><meta name=twitter:card content="summary"><meta name=twitter:title content="在 .bashrc 设置 LD_LIBRARY_PATH 导致 bash 提示 libtinfo.so.6: no version information available 的原因与影响"><meta name=twitter:description content="现象
在 ~/.bashrc 中全局设置了类似下面的环境变量后：
export LD_LIBRARY_PATH=/home/ziye_huang/anaconda3/envs/isaacgym/lib:$LD_LIBRARY_PATH
启动新的终端或执行 /bin/bash 时会出现警告：
/home/ziye_huang/anaconda3/envs/isaacgym/lib/libtinfo.so.6: no version information available (required by /bin/bash)
这通常发生在 Conda 环境的动态库优先级 覆盖了系统库之后。

背景：bash 为什么会碰到 libtinfo

bash 在很多发行版上会链接到 readline/ncurses 相关库（交互式编辑、历史记录、终端能力等）。
ncurses 的一部分拆分为 libtinfo（terminfo 数据与接口）。
因此，/bin/bash 在启动时会通过动态链接器加载 libtinfo.so.6。

关键点在于：动态链接器会按搜索顺序选择要加载的 libtinfo.so.6 的“具体文件”。

根因：LD_LIBRARY_PATH 让 bash 先加载了 Conda 里的 libtinfo
1) 动态链接器的常见搜索顺序（简化版）
通常会按优先级从高到低搜索：

LD_LIBRARY_PATH
可执行文件的 RPATH/RUNPATH（如果存在）
系统缓存 /etc/ld.so.cache
默认系统目录（如 /lib/x86_64-linux-gnu、/usr/lib/x86_64-linux-gnu 等）

你在 .bashrc 里 全局 把：
/home/ziye_huang/anaconda3/envs/isaacgym/lib
放到了 LD_LIBRARY_PATH 的最前面，使得启动 /bin/bash 时，动态链接器优先选择了 Conda 环境中的：
.../envs/isaacgym/lib/libtinfo.so.6
而不是系统自带的 libtinfo.so.6。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://analyst-huang.github.io/posts/"},{"@type":"ListItem","position":3,"name":"在 .bashrc 设置 LD_LIBRARY_PATH 导致 bash 提示 libtinfo.so.6: no version information available 的原因与影响","item":"https://analyst-huang.github.io/posts/%E6%9D%82%E8%B0%88/ld_library_path_libtinfo_bash_warning/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"在 .bashrc 设置 LD_LIBRARY_PATH 导致 bash 提示 libtinfo.so.6: no version information available 的原因与影响","name":"在 .bashrc 设置 LD_LIBRARY_PATH 导致 bash 提示 libtinfo.so.6: no version information available 的原因与影响","description":"现象 在 ~/.bashrc 中全局设置了类似下面的环境变量后：\nexport LD_LIBRARY_PATH=/home/ziye_huang/anaconda3/envs/isaacgym/lib:$LD_LIBRARY_PATH 启动新的终端或执行 /bin/bash 时会出现警告：\n/home/ziye_huang/anaconda3/envs/isaacgym/lib/libtinfo.so.6: no version information available (required by /bin/bash) 这通常发生在 Conda 环境的动态库优先级 覆盖了系统库之后。\n背景：bash 为什么会碰到 libtinfo bash 在很多发行版上会链接到 readline/ncurses 相关库（交互式编辑、历史记录、终端能力等）。 ncurses 的一部分拆分为 libtinfo（terminfo 数据与接口）。 因此，/bin/bash 在启动时会通过动态链接器加载 libtinfo.so.6。 关键点在于：动态链接器会按搜索顺序选择要加载的 libtinfo.so.6 的“具体文件”。\n根因：LD_LIBRARY_PATH 让 bash 先加载了 Conda 里的 libtinfo 1) 动态链接器的常见搜索顺序（简化版） 通常会按优先级从高到低搜索：\nLD_LIBRARY_PATH 可执行文件的 RPATH/RUNPATH（如果存在） 系统缓存 /etc/ld.so.cache 默认系统目录（如 /lib/x86_64-linux-gnu、/usr/lib/x86_64-linux-gnu 等） 你在 .bashrc 里 全局 把：\n/home/ziye_huang/anaconda3/envs/isaacgym/lib 放到了 LD_LIBRARY_PATH 的最前面，使得启动 /bin/bash 时，动态链接器优先选择了 Conda 环境中的：\n.../envs/isaacgym/lib/libtinfo.so.6 而不是系统自带的 libtinfo.so.6。\n","keywords":["linux","bash","conda","isaacgym","ld_library_path","ncurses","libtinfo"],"articleBody":"现象 在 ~/.bashrc 中全局设置了类似下面的环境变量后：\nexport LD_LIBRARY_PATH=/home/ziye_huang/anaconda3/envs/isaacgym/lib:$LD_LIBRARY_PATH 启动新的终端或执行 /bin/bash 时会出现警告：\n/home/ziye_huang/anaconda3/envs/isaacgym/lib/libtinfo.so.6: no version information available (required by /bin/bash) 这通常发生在 Conda 环境的动态库优先级 覆盖了系统库之后。\n背景：bash 为什么会碰到 libtinfo bash 在很多发行版上会链接到 readline/ncurses 相关库（交互式编辑、历史记录、终端能力等）。 ncurses 的一部分拆分为 libtinfo（terminfo 数据与接口）。 因此，/bin/bash 在启动时会通过动态链接器加载 libtinfo.so.6。 关键点在于：动态链接器会按搜索顺序选择要加载的 libtinfo.so.6 的“具体文件”。\n根因：LD_LIBRARY_PATH 让 bash 先加载了 Conda 里的 libtinfo 1) 动态链接器的常见搜索顺序（简化版） 通常会按优先级从高到低搜索：\nLD_LIBRARY_PATH 可执行文件的 RPATH/RUNPATH（如果存在） 系统缓存 /etc/ld.so.cache 默认系统目录（如 /lib/x86_64-linux-gnu、/usr/lib/x86_64-linux-gnu 等） 你在 .bashrc 里 全局 把：\n/home/ziye_huang/anaconda3/envs/isaacgym/lib 放到了 LD_LIBRARY_PATH 的最前面，使得启动 /bin/bash 时，动态链接器优先选择了 Conda 环境中的：\n.../envs/isaacgym/lib/libtinfo.so.6 而不是系统自带的 libtinfo.so.6。\n2) “no version information available” 是什么意思 这个提示来自动态链接器在做 符号版本（symbol versioning）校验 时的警告。典型情况是：\n系统的 /bin/bash（或它依赖的某个库）期望从 libtinfo.so.6 中拿到带版本标记的符号（例如 NCURSES6_TINFO_... 一类）。 但 Conda 环境中的 libtinfo.so.6 可能是： 用不同的构建选项编译（未启用符号版本、或版本脚本不同），或 被裁剪/打包成不包含期望的版本信息。 于是动态链接器给出警告：它仍然能解析到符号并继续运行，但无法匹配到预期的符号版本信息。 这类警告的本质是：你让一个“系统二进制”加载了一个“非系统构建”的同名动态库。\n影响评估：通常可用，但属于“环境污染”，风险不为零 1) 直接影响 多数情况下只是警告，bash 仍可正常启动和交互。 但这说明：你的 shell 进程从一开始就处在“混用系统库与 Conda 库”的状态。 2) 潜在影响（更值得关注） 终端/交互行为异常 历史记录、行编辑、光标控制等依赖 readline/ncurses 的行为可能出现细微异常（例如某些终端能力探测出错）。 其他系统程序被同样污染 你在 .bashrc 里设置的是全局变量；任何从该 shell 启动的程序都会继承它。 可能导致 ssh、tmux、less、top、git 等系统程序加载到 Conda 版本的库，从而出现难以复现的兼容性问题。 调试成本上升 一旦出现崩溃或诡异行为，LD_LIBRARY_PATH 会显著增加排查难度（“到底加载的是哪个 .so？”）。 安全与可控性 LD_LIBRARY_PATH 会影响动态链接器选择库的路径；如果路径中包含可被非预期修改的位置，存在供应链/篡改风险（这在多用户机器上尤其重要）。 结论：这不是一个“立即致命”的错误，但它是一个明确的坏味道（environment smell）：把项目运行时需要的库路径，强行注入到系统 shell 的全局动态库搜索路径中。\n如何确认：bash 实际加载了哪个 libtinfo 1) 用 ldd 快速查看（静态视角） ldd /bin/bash | grep -E \"tinfo|ncurses|readline\" 注意：ldd 在存在 LD_LIBRARY_PATH 时也会受影响，因此你可以对比：\n清空 LD_LIBRARY_PATH 运行： env -u LD_LIBRARY_PATH ldd /bin/bash | grep -E \"tinfo|ncurses|readline\" 当前环境运行： ldd /bin/bash | grep -E \"tinfo|ncurses|readline\" 2) 用 LD_DEBUG=libs 看动态加载路径（运行时视角） LD_DEBUG=libs /bin/bash -lc 'exit' 2\u003e\u00261 | grep -E \"libtinfo|search path\" 这能看到动态链接器按什么路径寻找 libtinfo.so.6，并最终选择了哪个文件。\n推荐修复方案（按优先级排序） 方案 A：不要在 .bashrc 全局设置 LD_LIBRARY_PATH（最推荐） 把 LD_LIBRARY_PATH 的设置限制在需要它的程序/环境中，而不是在 shell 初始化阶段全局生效。\n如果你只是为了 Isaac Gym / 仿真相关二进制能找到库，优先用下面更“局部化”的方式。\n方案 B：仅在 Conda 环境激活时设置（推荐） 在 Conda 环境里创建激活脚本：\nmkdir -p \"$CONDA_PREFIX/etc/conda/activate.d\" mkdir -p \"$CONDA_PREFIX/etc/conda/deactivate.d\" activate.d/ld_library_path.sh\nexport _OLD_LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH\" export LD_LIBRARY_PATH=\"$CONDA_PREFIX/lib${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}\" deactivate.d/ld_library_path.sh\nexport LD_LIBRARY_PATH=\"$_OLD_LD_LIBRARY_PATH\" unset _OLD_LD_LIBRARY_PATH 这样只有在 conda activate isaacgym 后才会影响动态库搜索路径；退出环境会恢复。\n方案 C：在 wrapper 脚本里设置（推荐） 对某个训练入口（例如 train_demo_replayer.py）创建脚本：\n#!/usr/bin/env bash set -euo pipefail CONDA_ENV_LIB=\"/home/ziye_huang/anaconda3/envs/isaacgym/lib\" export LD_LIBRARY_PATH=\"${CONDA_ENV_LIB}${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}\" exec python train_demo_replayer.py \"$@\" 这样环境变量只影响这次启动的进程树，不污染你的所有 shell。\n方案 D：把系统库优先级放在前面（不太推荐，但可作为止血） 如果你必须在 .bashrc 中设置（一般不建议），至少不要把 Conda 的 lib 放在最前面：\nexport LD_LIBRARY_PATH=\"${LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:}/home/ziye_huang/anaconda3/envs/isaacgym/lib\" 这会让系统默认路径仍可能优先命中。但注意：这仍然是全局污染，只是缓解冲突概率。\n方案 E：从根上减少对 LD_LIBRARY_PATH 的依赖（长期最优） 优先使用二进制的 RUNPATH/RPATH（构建时写入），或 使用容器/隔离环境（例如你在多 GPU 隔离时用到的 namespace/bwrap 一类方式），或 使用项目自身提供的启动脚本来设置必要的库路径。 目标是：把“依赖解析”从用户全局环境变量，移到可控的构建/部署层。\n经验法则：什么时候该用 LD_LIBRARY_PATH 适用：临时调试、单次运行、或确实无法改 RPATH/RUNPATH 且只影响局部进程树。 不适用：写进 .bashrc 并长期存在，尤其是把 Conda env 的 lib/ 放到最前面。 小结 看到的警告，本质原因是：系统 /bin/bash 被迫加载了 Conda 环境中的 libtinfo.so.6，其符号版本信息与系统期望不匹配。 直接影响通常只是警告，但它反映了一个更大的问题：全局 LD_LIBRARY_PATH 污染，可能导致更多系统程序加载到错误版本的动态库。 最推荐的修复策略是：不要在 .bashrc 全局设置，改为在 Conda 激活脚本或 wrapper 脚本中局部设置。 ","wordCount":"306","inLanguage":"en","datePublished":"2026-01-13T00:00:00Z","dateModified":"2026-01-13T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://analyst-huang.github.io/posts/%E6%9D%82%E8%B0%88/ld_library_path_libtinfo_bash_warning/"},"publisher":{"@type":"Organization","name":"Blog","logo":{"@type":"ImageObject","url":"https://analyst-huang.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://analyst-huang.github.io/ accesskey=h title="Blog (Alt + H)">Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://analyst-huang.github.io/posts/ title=文章><span>文章</span></a></li><li><a href=https://analyst-huang.github.io/about/ title=关于><span>关于</span></a></li><li><a href=https://analyst-huang.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://analyst-huang.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://analyst-huang.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">在 .bashrc 设置 LD_LIBRARY_PATH 导致 bash 提示 libtinfo.so.6: no version information available 的原因与影响</h1><div class=post-meta><span title='2026-01-13 00:00:00 +0000 UTC'>January 13, 2026</span>&nbsp;·&nbsp;<span>2 min</span></div></header><div class=post-content><h2 id=现象>现象<a hidden class=anchor aria-hidden=true href=#现象>#</a></h2><p>在 <code>~/.bashrc</code> 中全局设置了类似下面的环境变量后：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>export LD_LIBRARY_PATH<span style=color:#f92672>=</span>/home/ziye_huang/anaconda3/envs/isaacgym/lib:$LD_LIBRARY_PATH
</span></span></code></pre></div><p>启动新的终端或执行 <code>/bin/bash</code> 时会出现警告：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-text data-lang=text><span style=display:flex><span>/home/ziye_huang/anaconda3/envs/isaacgym/lib/libtinfo.so.6: no version information available (required by /bin/bash)
</span></span></code></pre></div><p>这通常发生在 <strong>Conda 环境的动态库优先级</strong> 覆盖了系统库之后。</p><hr><h2 id=背景bash-为什么会碰到-libtinfo>背景：bash 为什么会碰到 libtinfo<a hidden class=anchor aria-hidden=true href=#背景bash-为什么会碰到-libtinfo>#</a></h2><ul><li><code>bash</code> 在很多发行版上会链接到 <code>readline</code>/<code>ncurses</code> 相关库（交互式编辑、历史记录、终端能力等）。</li><li><code>ncurses</code> 的一部分拆分为 <code>libtinfo</code>（terminfo 数据与接口）。</li><li>因此，<code>/bin/bash</code> 在启动时会通过动态链接器加载 <code>libtinfo.so.6</code>。</li></ul><p>关键点在于：<strong>动态链接器会按搜索顺序选择要加载的 <code>libtinfo.so.6</code> 的“具体文件”。</strong></p><hr><h2 id=根因ld_library_path-让-bash-先加载了-conda-里的-libtinfo>根因：LD_LIBRARY_PATH 让 bash 先加载了 Conda 里的 libtinfo<a hidden class=anchor aria-hidden=true href=#根因ld_library_path-让-bash-先加载了-conda-里的-libtinfo>#</a></h2><h3 id=1-动态链接器的常见搜索顺序简化版>1) 动态链接器的常见搜索顺序（简化版）<a hidden class=anchor aria-hidden=true href=#1-动态链接器的常见搜索顺序简化版>#</a></h3><p>通常会按优先级从高到低搜索：</p><ol><li><code>LD_LIBRARY_PATH</code></li><li>可执行文件的 <code>RPATH/RUNPATH</code>（如果存在）</li><li>系统缓存 <code>/etc/ld.so.cache</code></li><li>默认系统目录（如 <code>/lib/x86_64-linux-gnu</code>、<code>/usr/lib/x86_64-linux-gnu</code> 等）</li></ol><p>你在 <code>.bashrc</code> 里 <strong>全局</strong> 把：</p><pre tabindex=0><code>/home/ziye_huang/anaconda3/envs/isaacgym/lib
</code></pre><p>放到了 <code>LD_LIBRARY_PATH</code> 的最前面，使得启动 <code>/bin/bash</code> 时，动态链接器优先选择了 Conda 环境中的：</p><pre tabindex=0><code>.../envs/isaacgym/lib/libtinfo.so.6
</code></pre><p>而不是系统自带的 <code>libtinfo.so.6</code>。</p><h3 id=2-no-version-information-available-是什么意思>2) “no version information available” 是什么意思<a hidden class=anchor aria-hidden=true href=#2-no-version-information-available-是什么意思>#</a></h3><p>这个提示来自动态链接器在做 <strong>符号版本（symbol versioning）校验</strong> 时的警告。典型情况是：</p><ul><li>系统的 <code>/bin/bash</code>（或它依赖的某个库）期望从 <code>libtinfo.so.6</code> 中拿到带版本标记的符号（例如 <code>NCURSES6_TINFO_...</code> 一类）。</li><li>但 Conda 环境中的 <code>libtinfo.so.6</code> 可能是：<ul><li>用不同的构建选项编译（未启用符号版本、或版本脚本不同），或</li><li>被裁剪/打包成不包含期望的版本信息。</li></ul></li><li>于是动态链接器给出警告：它仍然能解析到符号并继续运行，但无法匹配到预期的符号版本信息。</li></ul><p>这类警告的本质是：<strong>你让一个“系统二进制”加载了一个“非系统构建”的同名动态库。</strong></p><hr><h2 id=影响评估通常可用但属于环境污染风险不为零>影响评估：通常可用，但属于“环境污染”，风险不为零<a hidden class=anchor aria-hidden=true href=#影响评估通常可用但属于环境污染风险不为零>#</a></h2><h3 id=1-直接影响>1) 直接影响<a hidden class=anchor aria-hidden=true href=#1-直接影响>#</a></h3><ul><li>多数情况下只是警告，<code>bash</code> 仍可正常启动和交互。</li><li>但这说明：你的 shell 进程从一开始就处在“混用系统库与 Conda 库”的状态。</li></ul><h3 id=2-潜在影响更值得关注>2) 潜在影响（更值得关注）<a hidden class=anchor aria-hidden=true href=#2-潜在影响更值得关注>#</a></h3><ol><li><strong>终端/交互行为异常</strong><ul><li>历史记录、行编辑、光标控制等依赖 <code>readline/ncurses</code> 的行为可能出现细微异常（例如某些终端能力探测出错）。</li></ul></li><li><strong>其他系统程序被同样污染</strong><ul><li>你在 <code>.bashrc</code> 里设置的是全局变量；任何从该 shell 启动的程序都会继承它。</li><li>可能导致 <code>ssh</code>、<code>tmux</code>、<code>less</code>、<code>top</code>、<code>git</code> 等系统程序加载到 Conda 版本的库，从而出现难以复现的兼容性问题。</li></ul></li><li><strong>调试成本上升</strong><ul><li>一旦出现崩溃或诡异行为，<code>LD_LIBRARY_PATH</code> 会显著增加排查难度（“到底加载的是哪个 .so？”）。</li></ul></li><li><strong>安全与可控性</strong><ul><li><code>LD_LIBRARY_PATH</code> 会影响动态链接器选择库的路径；如果路径中包含可被非预期修改的位置，存在供应链/篡改风险（这在多用户机器上尤其重要）。</li></ul></li></ol><p>结论：<strong>这不是一个“立即致命”的错误，但它是一个明确的坏味道（environment smell）</strong>：把项目运行时需要的库路径，强行注入到系统 shell 的全局动态库搜索路径中。</p><hr><h2 id=如何确认bash-实际加载了哪个-libtinfo>如何确认：bash 实际加载了哪个 libtinfo<a hidden class=anchor aria-hidden=true href=#如何确认bash-实际加载了哪个-libtinfo>#</a></h2><h3 id=1-用-ldd-快速查看静态视角>1) 用 <code>ldd</code> 快速查看（静态视角）<a hidden class=anchor aria-hidden=true href=#1-用-ldd-快速查看静态视角>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>ldd /bin/bash | grep -E <span style=color:#e6db74>&#34;tinfo|ncurses|readline&#34;</span>
</span></span></code></pre></div><p>注意：<code>ldd</code> 在存在 <code>LD_LIBRARY_PATH</code> 时也会受影响，因此你可以对比：</p><ul><li>清空 <code>LD_LIBRARY_PATH</code> 运行：<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>env -u LD_LIBRARY_PATH ldd /bin/bash | grep -E <span style=color:#e6db74>&#34;tinfo|ncurses|readline&#34;</span>
</span></span></code></pre></div></li><li>当前环境运行：<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>ldd /bin/bash | grep -E <span style=color:#e6db74>&#34;tinfo|ncurses|readline&#34;</span>
</span></span></code></pre></div></li></ul><h3 id=2-用-ld_debuglibs-看动态加载路径运行时视角>2) 用 <code>LD_DEBUG=libs</code> 看动态加载路径（运行时视角）<a hidden class=anchor aria-hidden=true href=#2-用-ld_debuglibs-看动态加载路径运行时视角>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>LD_DEBUG<span style=color:#f92672>=</span>libs /bin/bash -lc <span style=color:#e6db74>&#39;exit&#39;</span> 2&gt;&amp;<span style=color:#ae81ff>1</span> | grep -E <span style=color:#e6db74>&#34;libtinfo|search path&#34;</span>
</span></span></code></pre></div><p>这能看到动态链接器按什么路径寻找 <code>libtinfo.so.6</code>，并最终选择了哪个文件。</p><hr><h2 id=推荐修复方案按优先级排序>推荐修复方案（按优先级排序）<a hidden class=anchor aria-hidden=true href=#推荐修复方案按优先级排序>#</a></h2><h3 id=方案-a不要在-bashrc-全局设置-ld_library_path最推荐>方案 A：不要在 <code>.bashrc</code> 全局设置 <code>LD_LIBRARY_PATH</code>（最推荐）<a hidden class=anchor aria-hidden=true href=#方案-a不要在-bashrc-全局设置-ld_library_path最推荐>#</a></h3><p>把 <code>LD_LIBRARY_PATH</code> 的设置限制在<strong>需要它的程序/环境</strong>中，而不是在 shell 初始化阶段全局生效。</p><p>如果你只是为了 Isaac Gym / 仿真相关二进制能找到库，优先用下面更“局部化”的方式。</p><hr><h3 id=方案-b仅在-conda-环境激活时设置推荐>方案 B：仅在 Conda 环境激活时设置（推荐）<a hidden class=anchor aria-hidden=true href=#方案-b仅在-conda-环境激活时设置推荐>#</a></h3><p>在 Conda 环境里创建激活脚本：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -p <span style=color:#e6db74>&#34;</span>$CONDA_PREFIX<span style=color:#e6db74>/etc/conda/activate.d&#34;</span>
</span></span><span style=display:flex><span>mkdir -p <span style=color:#e6db74>&#34;</span>$CONDA_PREFIX<span style=color:#e6db74>/etc/conda/deactivate.d&#34;</span>
</span></span></code></pre></div><p><strong>activate.d/ld_library_path.sh</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>export _OLD_LD_LIBRARY_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$LD_LIBRARY_PATH<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>export LD_LIBRARY_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$CONDA_PREFIX<span style=color:#e6db74>/lib</span><span style=color:#e6db74>${</span>LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><p><strong>deactivate.d/ld_library_path.sh</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>export LD_LIBRARY_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$_OLD_LD_LIBRARY_PATH<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>unset _OLD_LD_LIBRARY_PATH
</span></span></code></pre></div><p>这样只有在 <code>conda activate isaacgym</code> 后才会影响动态库搜索路径；退出环境会恢复。</p><hr><h3 id=方案-c在-wrapper-脚本里设置推荐>方案 C：在 wrapper 脚本里设置（推荐）<a hidden class=anchor aria-hidden=true href=#方案-c在-wrapper-脚本里设置推荐>#</a></h3><p>对某个训练入口（例如 <code>train_demo_replayer.py</code>）创建脚本：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env bash
</span></span></span><span style=display:flex><span>set -euo pipefail
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>CONDA_ENV_LIB<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/home/ziye_huang/anaconda3/envs/isaacgym/lib&#34;</span>
</span></span><span style=display:flex><span>export LD_LIBRARY_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>CONDA_ENV_LIB<span style=color:#e6db74>}${</span>LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>exec python train_demo_replayer.py <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><p>这样环境变量只影响这次启动的进程树，不污染你的所有 shell。</p><hr><h3 id=方案-d把系统库优先级放在前面不太推荐但可作为止血>方案 D：把系统库优先级放在前面（不太推荐，但可作为止血）<a hidden class=anchor aria-hidden=true href=#方案-d把系统库优先级放在前面不太推荐但可作为止血>#</a></h3><p>如果你必须在 <code>.bashrc</code> 中设置（一般不建议），至少不要把 Conda 的 lib 放在最前面：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>export LD_LIBRARY_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:<span style=color:#e6db74>}</span><span style=color:#e6db74>/home/ziye_huang/anaconda3/envs/isaacgym/lib&#34;</span>
</span></span></code></pre></div><p>这会让系统默认路径仍可能优先命中。但注意：<strong>这仍然是全局污染，只是缓解冲突概率</strong>。</p><hr><h3 id=方案-e从根上减少对-ld_library_path-的依赖长期最优>方案 E：从根上减少对 LD_LIBRARY_PATH 的依赖（长期最优）<a hidden class=anchor aria-hidden=true href=#方案-e从根上减少对-ld_library_path-的依赖长期最优>#</a></h3><ul><li>优先使用二进制的 <code>RUNPATH/RPATH</code>（构建时写入），或</li><li>使用容器/隔离环境（例如你在多 GPU 隔离时用到的 namespace/bwrap 一类方式），或</li><li>使用项目自身提供的启动脚本来设置必要的库路径。</li></ul><p>目标是：<strong>把“依赖解析”从用户全局环境变量，移到可控的构建/部署层。</strong></p><hr><h2 id=经验法则什么时候该用-ld_library_path>经验法则：什么时候该用 LD_LIBRARY_PATH<a hidden class=anchor aria-hidden=true href=#经验法则什么时候该用-ld_library_path>#</a></h2><ul><li>适用：临时调试、单次运行、或确实无法改 RPATH/RUNPATH 且只影响局部进程树。</li><li>不适用：写进 <code>.bashrc</code> 并长期存在，尤其是把 Conda env 的 <code>lib/</code> 放到最前面。</li></ul><hr><h2 id=小结>小结<a hidden class=anchor aria-hidden=true href=#小结>#</a></h2><ul><li>看到的警告，本质原因是：<strong>系统 <code>/bin/bash</code> 被迫加载了 Conda 环境中的 <code>libtinfo.so.6</code>，其符号版本信息与系统期望不匹配</strong>。</li><li>直接影响通常只是警告，但它反映了一个更大的问题：<strong>全局 <code>LD_LIBRARY_PATH</code> 污染</strong>，可能导致更多系统程序加载到错误版本的动态库。</li><li>最推荐的修复策略是：<strong>不要在 <code>.bashrc</code> 全局设置</strong>，改为在 Conda 激活脚本或 wrapper 脚本中局部设置。</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://analyst-huang.github.io/tags/linux/>Linux</a></li><li><a href=https://analyst-huang.github.io/tags/bash/>Bash</a></li><li><a href=https://analyst-huang.github.io/tags/conda/>Conda</a></li><li><a href=https://analyst-huang.github.io/tags/isaacgym/>Isaacgym</a></li><li><a href=https://analyst-huang.github.io/tags/ld_library_path/>Ld_library_path</a></li><li><a href=https://analyst-huang.github.io/tags/ncurses/>Ncurses</a></li><li><a href=https://analyst-huang.github.io/tags/libtinfo/>Libtinfo</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://analyst-huang.github.io/>Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>